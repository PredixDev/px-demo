<link rel="import" href="../polymer/polymer.html"/>
<link rel="import" href="../px-tabs/px-tabs.html"/>
<link rel="import" href="css/px-demo-styles.html"/>

<!--
Displays a list of configs that the user can choose from.

#### Usage

    <px-demo-configs configs="[[configs]]" chosen-config="{{chosenConfig}}">
    </px-demo-configs>

@element px-demo-configs
@blurb Displays a list of configs that the user can choose from
@homepage index.html
@demo index.html
-->

<dom-module id="px-demo-configs">
  <template>
    <style include="px-demo-styles"></style>

    <template is="dom-if" if="[[_hasAnyConfigs(configs)]]">
      <px-tabs selected="{{_selectedTab}}" bare no-bottom-border>
        <template is="dom-repeat" items="[[configs]]">
          <px-tab>[[_getConfigName(item, index)]]</px-tab>
        </template>
      </px-tabs>
    </template>

  </template>
</dom-module>

<script>
  Polymer({
    is: 'px-demo-configs',

    properties: {
      /**
       * A list of configs that can be selected by the user. Will be displayed
       * as a list of tabs.
       */
      configs: {
        type: Array
      },

      /**
       * Currently selected config object.
       */
      chosenConfig: {
        type: Object,
        notify: true,
        computed: '_getChosenConfig(configs, _selectedTab)'
      },

      /**
       * Index of the selected config from px-tabs. When this is updated the
       * `chosenConfig` will be updated.
       */
      _selectedTab: {
        type: Number
      }
    },

    created() {
      this._selectedTab = 0;
    },

    /**
     * @param  {?Array<Object>} configs
     * @param  {?number} index
     * @return {Object|null}
     */
    _getChosenConfig(configs, index) {
      if (Array.isArray(configs) && configs.length && typeof index === 'number') {
        return configs[index];
      }
    },

    /**
     * Attempts to find a `configName` for the item. If there is no name,
     * returns a string like 'Option 1'.
     *
     * @return {string}
     */
    _getConfigName(item, index) {
      if (item === undefined || index === undefined) return '';
      return item.configName ? item.configName : `Option ${index+1}`;
    },

    /**
     * @return {boolean}
     */
    _hasAnyConfigs: function(configs) {
      return this.configs.length > 0;
    }
  });
</script>
